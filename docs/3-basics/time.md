# Time in DSOL

## Time and state

Simulation is all about experimenting with a model where **state** changes over **time**. State is easily represented in an object-oriented programming environment: all attribute values of all object instances in the model constitute the state of the model. Programming languages have no similar concept for 'time', though. Therefore time is kept by the Simulator object that is responsible for maintaining and updating the simulation time. 

Time comes in two flavors: **absolute time**, also known as an _instant_ or a _point in time_, and **relative time**, also known as a _duration_. An absolute time is, for instance, 3 January 2019 at 14:33. Absolute times can be subtracted from each other (_3 January 2019 at 14:33_ minus _2 January 2019 at 14:33_ is _24 hours_, a duration), but not added to each other (what is _2 January 2019_ plus _5 September 2018_ ?). A duration can be added to, or subtracted from, an absolute time (_3 January 2019, 22:22_ plus _30 minutes_ equals _3 January 2019, 22:52_). Durations can  be added to each other, subtracted from each other, and multiplied by a constant (2 times _30 minutes_ equals _60 minutes_; _20 minutes_ plus _1 hour_ equals _80 minutes_). 

## Time representation in DSOL

DSOL supports the differences between absolute time and relative time, and offers five standard representations of absolute time and relative time.

| Name  | Absolute | Relative | Explanation / Example |
| ----- | ----- | ----- | ----- |
| [**TimeDouble**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/simtime/SimTimeDouble.html) | Double | Double | This is the most simple time, where absolute and relative times are both represented by a double value. |
| [**TimeFloat**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/simtime/SimTimeFloat.html) | Float | Float | Absolute and relative times are both represented by a float value. |
| [**TimeLong**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/simtime/SimTimeLong.html) | Long | Long | Absolute and relative times are both represented by a long value. This is, for instance, a time unit that can be used for agent-based models that use equidistant time 'ticks' rather than varying time intervals between simulation events. |
| [**TimeDoubleUnit**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/simtime/SimTimeDoubleUnit.html) | Time | Duration | Absolute and relative time are represented by classes from the [djunits](https://djunits.org) project, where [Time](https://djunits.org/docs/current/apidocs/org/djunits/value/vdouble/scalar/Time.html) represents absolute time, and [Duration](https://djunits.org/docs/current/apidocs/org/djunits/value/vdouble/scalar/Duration.html) represents relative time. Time and Duration can be used with their respective [TimeUnit](https://djunits.org/docs/current/apidocs/org/djunits/unit/TimeUnit.html) and [DurationUnit](https://djunits.org/docs/current/apidocs/org/djunits/unit/DurationUnit.html). An example is <br>`Duration duration = new Duration(45.0, DurationUnit.SECOND);` |
| [**TimeFloatUnit**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/simtime/SimTimeFloatUnit.html) | FloatTime | FloatDuration | Absolute and relative time are represented by classes from the [djunits](https://djunits.org) project, where [FloatTime](https://djunits.org/docs/current/apidocs/org/djunits/value/vfloat/scalar/FloatTime.html) represents absolute time, and [FloatDuration](https://djunits.org/docs/current/apidocs/org/djunits/value/vfloat/scalar/FloatDuration.html) represents relative time. FloatTime and FloatDuration can be used with their respective [TimeUnit](https://djunits.org/docs/current/apidocs/org/djunits/unit/TimeUnit.html) and [DurationUnit](https://djunits.org/docs/current/apidocs/org/djunits/unit/DurationUnit.html). An example is <br>`FloatDuration duration = new FloatDuration(12.0f, DurationUnit.HOUR);` |


## Usage of simulation time type in other classes

Many classes in DSOL have an indication for the simulation time type using a so-called static inner class. This is done to keep the usage of simulation time types internally consistent. It avoids, for instance, the usage of a model that uses Long time ticks on a simulator that expresses time as Time and Duration objects. Examples of classes and interfaces that use simulation time types are:

* [**DSOLModel**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/model/DSOLModel.html). The `DSOLModel` is the interface that specifies what a simulation model should implement. An example of a time-specified `DSOLModel` interface is `DSOLModel.TimeDoubleUnit`.
* [**AbstractDSOLModel**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/model/AbstractDSOLModel.html). The `AbstractDSOLModel` is a reference base implementation of the `DSOLModel` interface, that actual models can inherit from. An example is:<br>`public class MM1Model extends AbstractDSOLModel.TimeDouble`
* [**Simulator**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/simulators/Simulator.html). The `Simulator` interface specifies what any DSOL Simulator should implement. Example methods are `start()`, `step()` and `stop()`, as well as the `getSimulatorTime()` method that returns the absolute simulation time. When calling `getSimulatorTime()` on a `Simulator.CalendarDouble`, a `Calendar` object is returned, whereas calling the same method on a `Simulator.Double` returns a double value. All sub-interfaces and implementations of the `Simulator` interface such as the `DEVSSimulator`, the `DESSSimulator`, the `DEVSAnimator` and the `DEVSRealTimeClock` have the same inner classes. A discrete-event model without animation using Time and Duration for its time would run on a `DEVSSimulator.TimeDoubleUnit`. 
* [**SimEventInterface**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/formalisms/eventscheduling/SimEventInterface.html) and [**SimEvent**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/formalisms/eventscheduling/SimEvent.html) that represent discrete events in the simulaton need to know on which time unit they are executed because of the execution time of the event.
* [**Experiment**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/experiment/Experiment.html), [**Treatment**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/experiment/Treatment.html), and [**Replication**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/experiment/Replication.html) that represent the run control conditions under which the simulation is executed. A `DSOLModel.TimeLong` can only be executed by an `Experiment.TimeLong`.
* Flow-control blocks such as [**Generator**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/formalisms/flow/Generator.html), [**Seize**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/formalisms/flow/Seize.html), [**Delay**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/formalisms/flow/Delay.html), [**Release**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/formalisms/flow/Release.html), [**Duplicate**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/formalisms/flow/Duplicate.html), [**Schedule**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/formalisms/flow/Schedule.html) and [**Departure**](https://simulation.tudelft.nl/dsol/docs/dsol-core/apidocs/nl/tudelft/simulation/dsol/formalisms/flow/Departure.html) all have sub-types for each of the eight simulation time classes.

